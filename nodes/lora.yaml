# Home Assistant Package

mqtt:
#2
  sensor:
###4
    - name: "LoRa ID Raw"
      unique_id: LoRa_ID_Raw
      state_topic: "home/OMG_ESP32_LORA/LORAtoMQTT"
      value_template: >
        {{ value_json.message }}
        
    - name: "LoRa ID Status"
      unique_id: LoRa_ID_Status
      state_topic: "home/OMG_ESP32_LORA/LORAtoMQTT"
      value_template: >
        {% set id = value_json.message.id|string %}
        {% if id == "id7" %}
          {{ "ok" }}
        {% endif %}

    - name: "LoRa ID Temp"
      unique_id: LoRa_ID_Temp
      state_topic: "home/OMG_ESP32_LORA/LORAtoMQTT"
      value_template: >
        {% set id = value_json.message.id|string %}
        {% set temp = json_value.message.tempc|float(None) %}
        {% if id == "id7" and temp > -99 %}
          {{ temp }}
        {% endif %}
        
# EOF
